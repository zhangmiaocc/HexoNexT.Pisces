---
title: Animationä½ç§»æ¸å˜ç»„åˆåŠ¨ç”»äº†è§£ä¸€ä¸‹
tags:
  - Android
  - Animation
categories:
  - Android
  - Animation
abbrlink: 91718fcd
date: 2018-12-27 11:41:10
---

### ä¸€ï¼šéœ€æ±‚åˆ†æ

æœ€è¿‘è¦å®ç°ä¸€ä¸ªviewä¸Šä¸‹å¾ªç¯æ»šåŠ¨çš„åŠ¨ç”»ï¼Œéœ€è¦å¸¦æœ‰ä½ç½®ç§»åŠ¨å’Œé€æ˜åº¦è½¬å˜çš„åŠ¨ç”»ã€‚ç±»ä¼¼äºä»Aåˆ°Bå‘ç”Ÿä½ç§»åŠ¨ç”»ï¼Œä¸”viewé€æ¸æ˜¾ç¤ºã€‚è€Œä»Båˆ°Cå‘ç”Ÿä½ç§»åŠ¨ç”»ï¼Œä¸”viewæ¸å˜æš—æ¶ˆå¤±ã€‚å®ç°æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š

![](https://raw.githubusercontent.com/zhangmiaocc/blogImageResource/master/img/6.gif)

### äºŒï¼šéœ€æ±‚æ‹†åˆ†

æ¥åˆ°è¿™ä¸ªéœ€æ±‚åï¼Œé¦–å…ˆå°†éœ€æ±‚è¿›è¡Œç»†åˆ†ï¼Œåˆ†ä¸ºä½ç§»åŠ¨ç”»å’Œé€æ¸å˜é‡ï¼ˆå˜æš—ï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚å¯¹åº”çš„Androidçš„åŠ¨ç”»ç±»åˆ†åˆ«æ˜¯TranslateAnimation(ä½ç§»åŠ¨ç”»)å’ŒAlphaAniamtion(é€æ˜åº¦å˜åŒ–åŠ¨ç”»)ã€‚é¦–å…ˆå…ˆç†Ÿæ‚‰ä¸€ä¸‹è¿™ä¸¤ç§åŠ¨ç”»ã€‚

<!--more-->

#### 1ï¼šTranslateAnimation ä½ç§»åŠ¨ç”»

```java
private void startTranslateAnimation() {
    /**
     * è¿›è¡Œä½ç§»åŠ¨ç”»ï¼Œæ ‡å‡†æ­¥éª¤
     *      1. åˆ›å»ºä½ç§»åŠ¨ç”»å¯¹è±¡
     *            æ„é€ å‡½æ•° TranslateAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta)
     *            å‚æ•°å«ä¹‰ï¼šç›¸å¯¹äºåŸå›¾ä½ç½®   fromXDelta Xè½´èµ·ç‚¹ç›¸å¯¹äºåŸå›¾åç§»  toXDelta Xè½´ç»ˆç‚¹ç›¸å¯¹äºåŸå›¾åç§»
     *                                    fromYDelta Yè½´èµ·ç‚¹ç›¸å¯¹äºåŸå›¾åç§»  toYDelta Yè½´ç»ˆç‚¹ç›¸å¯¹äºåŸå›¾åç§»
     *      2. è®¾ç½®åŠ¨ç”»ç»ˆç‚¹æ˜¯å¦ä¿æŒ setFillAfter ï¼š true åŠ¨ç”»ç»“æŸåç•™åœ¨ç»ˆç‚¹  false:åŠ¨ç”»ç»“æŸåè¿”å›èµ·ç‚¹
     */
    TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -200.0f);
    translateAnimation.setFillAfter(true);
    translateAnimation.setDuration(1000);
 
    mTextView.startAnimation(translateAnimation);
}
```
**è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªå°ç‚¹ï¼šè®¾ç½®FillAfterçš„å€¼ï¼Œä¸ºtrueä»£è¡¨åŠ¨ç”»åViewåœç•™åœ¨ç»ˆç‚¹ä½ç½®å¤„ï¼Œfalseä»£è¡¨åŠ¨ç”»ç»“æŸåè¿”å›èµ·ç‚¹ã€‚**

#### 2ï¼šAlphaAnimation é€æ˜åº¦è½¬å˜åŠ¨ç”»

```java
private void startAlphaAnimation() {
    /**
     * è¿›è¡Œé€æ˜åº¦å˜åŒ–åŠ¨ç”»ï¼Œæ ‡å‡†æ­¥éª¤
     *      1. åˆ›å»ºAlphaAnimationåŠ¨ç”»
     *          æ„é€ å‡½æ•° AlphaAnimation fromAlphaVal  toAlphaVal
     */
    AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f);
    alphaAnimation.setFillAfter(true);
    alphaAnimation.setDuration(1000);
 
    mTextView.startAnimation(alphaAnimation);
}
```
#### 3ï¼šåŒæ—¶å®Œæˆä½ç§»å’Œé€æ˜åº¦åŠ¨ç”»éœ€æ±‚

```java
private void startAppearanceAnimation() {
    /**
     * æ ¸å¿ƒç±» AnimationSet é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå°†å¤šç§åŠ¨ç”»æ”¾åœ¨ä¸€ä¸ªseté›†åˆé‡Œé¢
     *    äº§ç”Ÿæ¸æ¸æ˜¾ç¤º+ä½ç§»åŠ¨ç”»ï¼Œå°†åŠ é€Ÿå°ç«ç®­æ¸æ¸æ˜¾ç¤ºå‡ºæ¥;
     *
     */
    TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -200.0f);
    AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f);
 
    AnimationSet animationSet = new AnimationSet(true);
    animationSet.setFillAfter(true);
    animationSet.setDuration(1000);
    animationSet.addAnimation(translateAnimation);
    animationSet.addAnimation(alphaAnimation);
 
    mTextView.startAnimation(animationSet);
}
```
å®ç°å åŠ çš„åŠ¨ç”»æ•ˆæœï¼šè¿™é‡Œä¸€å®šè¦æ³¨æ„çš„æ˜¯ï¼Œ**å¯¹AnimationSetåŠ¨ç”»ï¼ŒfillAfterå’Œdurationéœ€è¦åœ¨AniamtionSetå¯¹è±¡ä¸­è®¾ç½®**ï¼Œä¸è¦è®¾ç½®å•ä¸ªåŠ¨ç”»å¯¹è±¡ä¸Šã€‚

#### 4ï¼šå®Œæˆçš„åŠ¨ç”»è¿‡ç¨‹ï¼ˆä½ç§»+æ¸æ¸æ˜¾ç¤º  åœç•™  ä½ç§»+æ¸æ¸éšè—ï¼‰
```java
package com.zm.animationdemo;

import android.os.Bundle;
import android.os.Handler;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.AnimationSet;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends AppCompatActivity {

    TextView tv_text;
    Button btn;
    List<String> textList = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv_text = findViewById(R.id.tv_text);
        btn = findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startAppearanceAnimation();
            }
        });

        textList.add("Hello World!");
        textList.add("Welcome to my blog!");
        textList.add("https://zhangmiao.cc");
        textList.add("Knowledge is power.");
        textList.add("Learn and live.");
        textList.add("å¯ä»¥ä¸æˆåŠŸï¼Œä½†ä¸å¯ä»¥ä¸æˆé•¿ï¼");
        textList.add("åŠ æ²¹ğŸ’ª");
    }

    private void startAppearanceAnimation() {
        /**
         * æ ¸å¿ƒç±» AnimationSet é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå°†å¤šç§åŠ¨ç”»æ”¾åœ¨ä¸€ä¸ªseté›†åˆé‡Œé¢
         *    äº§ç”Ÿæ¸æ¸æ˜¾ç¤º+ä½ç§»åŠ¨ç”»
         *
         */
        TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -50.0f);
        AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f);

        AnimationSet animationSet = new AnimationSet(true);
        animationSet.setFillAfter(true);
        animationSet.setDuration(1000);
        animationSet.addAnimation(translateAnimation);
        animationSet.addAnimation(alphaAnimation);

        animationSet.setAnimationListener(new Animation.AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                new Handler().postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        startDisappearanceAnimation();
                    }
                }, 1500);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }
        });
        tv_text.startAnimation(animationSet);
        int index = (int) (Math.random() * textList.size());
        tv_text.setText(textList.get(index));
    }

    private void startDisappearanceAnimation() {
        TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, -50.0f, -100.0f);
        AlphaAnimation alphaAnimation = new AlphaAnimation(1.0f, 0.0f);

        AnimationSet animationSet = new AnimationSet(true);
        animationSet.setFillAfter(true);
        animationSet.setDuration(1000);
        animationSet.addAnimation(translateAnimation);
        animationSet.addAnimation(alphaAnimation);
        animationSet.setAnimationListener(new Animation.AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                startAppearanceAnimation();
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }
        });
        tv_text.startAnimation(animationSet);
    }

}
```

### æ€»ç»“

- ä½ç§»åŠ¨ç”»TranslateAnimationå®ç°ä½ç§»ï¼ŒSetFIllAfter=trueå¯è®©Viewåœç•™åœ¨åŠ¨ç”»ç»ˆç‚¹å¤„,falseè¿”å›åŠ¨ç”»èµ·ç‚¹
- é€æ˜åº¦åŠ¨ç”» AlphaAnimationå®ç°é€æ˜åº¦å˜åŒ–ï¼Œå¯å®ç°Viewçš„æ¸æ˜¾æˆ–è€…æ¸éšæ•ˆæœ
- åŠ¨ç”»æ•ˆæœå¯ä»¥å åŠ å±•ç¤ºï¼Œé€šè¿‡AnimationSetå®ç°ã€‚æ•´ä¸ªåŠ¨ç”»çš„fillAfterå’Œdurationéœ€è¦è®¾ç½®åœ¨AnimationSetå¯¹è±¡ä¸Šï¼Œè€Œä¸æ˜¯å•ä¸ªå¯¹è±¡å•ç‹¬è®¾ç½®ï¼ˆå•ç‹¬è®¾ç½®ä¸ä¼šæœ‰æ•ˆæœï¼‰
